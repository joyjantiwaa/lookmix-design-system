import{r as g,a as ln}from"./iframe-BzsbkQY8.js";import{j as te}from"./jsx-runtime-D7NN_m21.js";import{r as an}from"./index-Dy6oeK8J.js";function et(){return typeof window<"u"}function xe(e){return Et(e)?(e.nodeName||"").toLowerCase():"#document"}function J(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function le(e){var t;return(t=(Et(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Et(e){return et()?e instanceof Node||e instanceof J(e).Node:!1}function V(e){return et()?e instanceof Element||e instanceof J(e).Element:!1}function K(e){return et()?e instanceof HTMLElement||e instanceof J(e).HTMLElement:!1}function ht(e){return!et()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof J(e).ShadowRoot}const _n=new Set(["inline","contents"]);function Le(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=ne(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!_n.has(o)}const $n=new Set(["table","td","th"]);function Wn(e){return $n.has(xe(e))}const Vn=[":popover-open",":modal"];function tt(e){return Vn.some(t=>{try{return e.matches(t)}catch{return!1}})}const jn=["transform","translate","scale","rotate","perspective"],Hn=["transform","translate","scale","rotate","perspective","filter"],Kn=["paint","layout","strict","content"];function St(e){const t=nt(),n=V(e)?ne(e):e;return jn.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Hn.some(r=>(n.willChange||"").includes(r))||Kn.some(r=>(n.contain||"").includes(r))}function qn(e){let t=me(e);for(;K(t)&&!de(t);){if(St(t))return t;if(tt(t))return null;t=me(t)}return null}function nt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Un=new Set(["html","body","#document"]);function de(e){return Un.has(xe(e))}function ne(e){return J(e).getComputedStyle(e)}function rt(e){return V(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function me(e){if(xe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ht(e)&&e.host||le(e);return ht(t)?t.host:t}function un(e){const t=me(e);return de(t)?e.ownerDocument?e.ownerDocument.body:e.body:K(t)&&Le(t)?t:un(t)}function ye(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=un(e),i=o===((r=e.ownerDocument)==null?void 0:r.body),s=J(o);if(i){const c=bt(s);return t.concat(s,s.visualViewport||[],Le(o)?o:[],c&&n?ye(c):[])}return t.concat(o,ye(o,[],n))}function bt(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Pe=Math.min,G=Math.max,Ue=Math.round,Ve=Math.floor,ce=e=>({x:e,y:e}),Xn={left:"right",right:"left",bottom:"top",top:"bottom"},Yn={start:"end",end:"start"};function kt(e,t,n){return G(e,Pe(t,n))}function Ne(e,t){return typeof e=="function"?e(t):e}function we(e){return e.split("-")[0]}function Be(e){return e.split("-")[1]}function fn(e){return e==="x"?"y":"x"}function dn(e){return e==="y"?"height":"width"}const zn=new Set(["top","bottom"]);function fe(e){return zn.has(we(e))?"y":"x"}function mn(e){return fn(fe(e))}function Gn(e,t,n){n===void 0&&(n=!1);const r=Be(e),o=mn(e),i=dn(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=Xe(s)),[s,Xe(s)]}function Zn(e){const t=Xe(e);return[vt(e),t,vt(t)]}function vt(e){return e.replace(/start|end/g,t=>Yn[t])}const Mt=["left","right"],Ft=["right","left"],Jn=["top","bottom"],Qn=["bottom","top"];function er(e,t,n){switch(e){case"top":case"bottom":return n?t?Ft:Mt:t?Mt:Ft;case"left":case"right":return t?Jn:Qn;default:return[]}}function tr(e,t,n,r){const o=Be(e);let i=er(we(e),n==="start",r);return o&&(i=i.map(s=>s+"-"+o),t&&(i=i.concat(i.map(vt)))),i}function Xe(e){return e.replace(/left|right|bottom|top/g,t=>Xn[t])}function nr(e){return{top:0,right:0,bottom:0,left:0,...e}}function rr(e){return typeof e!="number"?nr(e):{top:e,right:e,bottom:e,left:e}}function Ye(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var or=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],ze=or.join(","),gn=typeof Element>"u",ke=gn?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ge=!gn&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Fe=function(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),i=o===""||o==="true",s=i||n&&t&&Fe(t.parentNode);return s},ir=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},pn=function(t,n,r){if(Fe(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(ze));return n&&ke.call(t,ze)&&o.unshift(t),o=o.filter(r),o},Ze=function(t,n,r){for(var o=[],i=Array.from(t);i.length;){var s=i.shift();if(!Fe(s,!1))if(s.tagName==="SLOT"){var c=s.assignedElements(),a=c.length?c:s.children,l=Ze(a,!0,r);r.flatten?o.push.apply(o,l):o.push({scopeParent:s,candidates:l})}else{var u=ke.call(s,ze);u&&r.filter(s)&&(n||!t.includes(s))&&o.push(s);var d=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),p=!Fe(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(d&&p){var f=Ze(d===!0?s.children:d.children,!0,r);r.flatten?o.push.apply(o,f):o.push({scopeParent:s,candidates:f})}else i.unshift.apply(i,s.children)}}return o},hn=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},bn=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||ir(t))&&!hn(t)?0:t.tabIndex},sr=function(t,n){var r=bn(t);return r<0&&n&&!hn(t)?0:r},cr=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},vn=function(t){return t.tagName==="INPUT"},lr=function(t){return vn(t)&&t.type==="hidden"},ar=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},ur=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},fr=function(t){if(!t.name)return!0;var n=t.form||Ge(t),r=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=ur(o,t.form);return!i||i===t},dr=function(t){return vn(t)&&t.type==="radio"},mr=function(t){return dr(t)&&!fr(t)},gr=function(t){var n,r=t&&Ge(t),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==t){var s,c,a;for(i=!!((s=o)!==null&&s!==void 0&&(c=s.ownerDocument)!==null&&c!==void 0&&c.contains(o)||t!=null&&(a=t.ownerDocument)!==null&&a!==void 0&&a.contains(t));!i&&o;){var l,u,d;r=Ge(o),o=(l=r)===null||l===void 0?void 0:l.host,i=!!((u=o)!==null&&u!==void 0&&(d=u.ownerDocument)!==null&&d!==void 0&&d.contains(o))}}return i},Dt=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},pr=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in t){var i=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!i}if(getComputedStyle(t).visibility==="hidden")return!0;var s=ke.call(t,"details>summary:first-of-type"),c=s?t.parentElement:t;if(ke.call(c,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof o=="function"){for(var a=t;t;){var l=t.parentElement,u=Ge(t);if(l&&!l.shadowRoot&&o(l)===!0)return Dt(t);t.assignedSlot?t=t.assignedSlot:!l&&u!==t.ownerDocument?t=u.host:t=l}t=a}if(gr(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Dt(t);return!1},hr=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return ke.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},yt=function(t,n){return!(n.disabled||Fe(n)||lr(n)||pr(n,t)||ar(n)||hr(n))},wt=function(t,n){return!(mr(n)||bn(n)<0||!yt(t,n))},br=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},yn=function(t){var n=[],r=[];return t.forEach(function(o,i){var s=!!o.scopeParent,c=s?o.scopeParent:o,a=sr(c,s),l=s?yn(o.candidates):c;a===0?s?n.push.apply(n,l):n.push(c):r.push({documentOrder:i,tabIndex:a,item:o,isScope:s,content:l})}),r.sort(cr).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},ot=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Ze([t],n.includeContainer,{filter:wt.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:br}):r=pn(t,n.includeContainer,wt.bind(null,n)),yn(r)},vr=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Ze([t],n.includeContainer,{filter:yt.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=pn(t,n.includeContainer,yt.bind(null,n)),r},wn=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return ke.call(t,ze)===!1?!1:wt(n,t)};function xn(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Rn(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function yr(){return/apple/i.test(navigator.vendor)}function xt(){const e=/android/i;return e.test(xn())||e.test(Rn())}function wr(){return Rn().includes("jsdom/")}const Lt="data-floating-ui-focusable",xr="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Ce(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function z(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&ht(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function be(e){return"composedPath"in e?e.composedPath()[0]:e.target}function at(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Rr(e){return e.matches("html,body")}function oe(e){return(e==null?void 0:e.ownerDocument)||document}function En(e){return K(e)&&e.matches(xr)}function Nt(e){return e?e.getAttribute("role")==="combobox"&&En(e):!1}function Rt(e){return e?e.hasAttribute(Lt)?e:e.querySelector("["+Lt+"]")||e:null}function Ae(e,t,n){return n===void 0&&(n=!0),e.filter(o=>{var i;return o.parentId===t&&(!n||((i=o.context)==null?void 0:i.open))}).flatMap(o=>[o,...Ae(e,o.id,n)])}function Bt(e,t){var n;let r=[],o=(n=e.find(i=>i.id===t))==null?void 0:n.parentId;for(;o;){const i=e.find(s=>s.id===o);o=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function ut(e){e.preventDefault(),e.stopPropagation()}function Er(e){return"nativeEvent"in e}function Sr(e){return e.mozInputSource===0&&e.isTrusted?!0:xt()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Tr(e){return wr()?!1:!xt()&&e.width===0&&e.height===0||xt()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function _t(e,t){return["mouse","pen"].includes(e)}var Cr=typeof document<"u",Ar=function(){},Z=Cr?g.useLayoutEffect:Ar;const Or={...ln};function ft(e){const t=g.useRef(e);return Z(()=>{t.current=e}),t}const Ir=Or.useInsertionEffect,Pr=Ir||(e=>e());function se(e){const t=g.useRef(()=>{});return Pr(()=>{t.current=e}),g.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}const _e=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Sn(e,t){const n=ot(e,_e()),r=n.length;if(r===0)return;const o=Ce(oe(e)),i=n.indexOf(o),s=i===-1?t===1?0:r-1:i+t;return n[s]}function Tn(e){return Sn(oe(e).body,1)||e}function Cn(e){return Sn(oe(e).body,-1)||e}function Me(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!z(n,r)}function kr(e){ot(e,_e()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function $t(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}function Wt(e,t,n){let{reference:r,floating:o}=e;const i=fe(t),s=mn(t),c=dn(s),a=we(t),l=i==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,p=r[c]/2-o[c]/2;let f;switch(a){case"top":f={x:u,y:r.y-o.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-o.width,y:d};break;default:f={x:r.x,y:r.y}}switch(Be(t)){case"start":f[s]-=p*(n&&l?-1:1);break;case"end":f[s]+=p*(n&&l?-1:1);break}return f}const Mr=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,c=i.filter(Boolean),a=await(s.isRTL==null?void 0:s.isRTL(t));let l=await s.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=Wt(l,r,a),p=r,f={},b=0;for(let m=0;m<c.length;m++){const{name:x,fn:y}=c[m],{x:h,y:v,data:S,reset:T}=await y({x:u,y:d,initialPlacement:r,placement:p,strategy:o,middlewareData:f,rects:l,platform:s,elements:{reference:e,floating:t}});u=h??u,d=v??d,f={...f,[x]:{...f[x],...S}},T&&b<=50&&(b++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(l=T.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:o}):T.rects),{x:u,y:d}=Wt(l,p,a)),m=-1)}return{x:u,y:d,placement:p,strategy:o,middlewareData:f}};async function Tt(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:i,rects:s,elements:c,strategy:a}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:f=0}=Ne(t,e),b=rr(f),x=c[p?d==="floating"?"reference":"floating":d],y=Ye(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:l,rootBoundary:u,strategy:a})),h=d==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),S=await(i.isElement==null?void 0:i.isElement(v))?await(i.getScale==null?void 0:i.getScale(v))||{x:1,y:1}:{x:1,y:1},T=Ye(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:h,offsetParent:v,strategy:a}):h);return{top:(y.top-T.top+b.top)/S.y,bottom:(T.bottom-y.bottom+b.bottom)/S.y,left:(y.left-T.left+b.left)/S.x,right:(T.right-y.right+b.right)/S.x}}const Fr=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:c,platform:a,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:m=!0,...x}=Ne(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=we(o),h=fe(c),v=we(c)===c,S=await(a.isRTL==null?void 0:a.isRTL(l.floating)),T=p||(v||!m?[Xe(c)]:Zn(c)),N=b!=="none";!p&&N&&T.push(...tr(c,m,b,S));const I=[c,...T],B=await Tt(t,x),q=[];let $=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&q.push(B[y]),d){const R=Gn(o,s,S);q.push(B[R[0]],B[R[1]])}if($=[...$,{placement:o,overflows:q}],!q.every(R=>R<=0)){var _,X;const R=(((_=i.flip)==null?void 0:_.index)||0)+1,E=I[R];if(E&&(!(d==="alignment"?h!==fe(E):!1)||$.every(w=>fe(w.placement)===h?w.overflows[0]>0:!0)))return{data:{index:R,overflows:$},reset:{placement:E}};let M=(X=$.filter(D=>D.overflows[0]<=0).sort((D,w)=>D.overflows[1]-w.overflows[1])[0])==null?void 0:X.placement;if(!M)switch(f){case"bestFit":{var j;const D=(j=$.filter(w=>{if(N){const O=fe(w.placement);return O===h||O==="y"}return!0}).map(w=>[w.placement,w.overflows.filter(O=>O>0).reduce((O,L)=>O+L,0)]).sort((w,O)=>w[1]-O[1])[0])==null?void 0:j[0];D&&(M=D);break}case"initialPlacement":M=c;break}if(o!==M)return{reset:{placement:M}}}return{}}}},Dr=new Set(["left","top"]);async function Lr(e,t){const{placement:n,platform:r,elements:o}=e,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=we(n),c=Be(n),a=fe(n)==="y",l=Dr.has(s)?-1:1,u=i&&a?-1:1,d=Ne(t,e);let{mainAxis:p,crossAxis:f,alignmentAxis:b}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return c&&typeof b=="number"&&(f=c==="end"?b*-1:b),a?{x:f*u,y:p*l}:{x:p*l,y:f*u}}const Nr=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:s,middlewareData:c}=t,a=await Lr(t,e);return s===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:o+a.x,y:i+a.y,data:{...a,placement:s}}}}},Br=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:c={fn:x=>{let{x:y,y:h}=x;return{x:y,y:h}}},...a}=Ne(e,t),l={x:n,y:r},u=await Tt(t,a),d=fe(we(o)),p=fn(d);let f=l[p],b=l[d];if(i){const x=p==="y"?"top":"left",y=p==="y"?"bottom":"right",h=f+u[x],v=f-u[y];f=kt(h,f,v)}if(s){const x=d==="y"?"top":"left",y=d==="y"?"bottom":"right",h=b+u[x],v=b-u[y];b=kt(h,b,v)}const m=c.fn({...t,[p]:f,[d]:b});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[p]:i,[d]:s}}}}}},_r=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:i,platform:s,elements:c}=t,{apply:a=()=>{},...l}=Ne(e,t),u=await Tt(t,l),d=we(o),p=Be(o),f=fe(o)==="y",{width:b,height:m}=i.floating;let x,y;d==="top"||d==="bottom"?(x=d,y=p===(await(s.isRTL==null?void 0:s.isRTL(c.floating))?"start":"end")?"left":"right"):(y=d,x=p==="end"?"top":"bottom");const h=m-u.top-u.bottom,v=b-u.left-u.right,S=Pe(m-u[x],h),T=Pe(b-u[y],v),N=!t.middlewareData.shift;let I=S,B=T;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(B=v),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(I=h),N&&!p){const $=G(u.left,0),_=G(u.right,0),X=G(u.top,0),j=G(u.bottom,0);f?B=b-2*($!==0||_!==0?$+_:G(u.left,u.right)):I=m-2*(X!==0||j!==0?X+j:G(u.top,u.bottom))}await a({...t,availableWidth:B,availableHeight:I});const q=await s.getDimensions(c.floating);return b!==q.width||m!==q.height?{reset:{rects:!0}}:{}}}};function An(e){const t=ne(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=K(e),i=o?e.offsetWidth:n,s=o?e.offsetHeight:r,c=Ue(n)!==i||Ue(r)!==s;return c&&(n=i,r=s),{width:n,height:r,$:c}}function Ct(e){return V(e)?e:e.contextElement}function Oe(e){const t=Ct(e);if(!K(t))return ce(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=An(t);let s=(i?Ue(n.width):n.width)/r,c=(i?Ue(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!c||!Number.isFinite(c))&&(c=1),{x:s,y:c}}const $r=ce(0);function On(e){const t=J(e);return!nt()||!t.visualViewport?$r:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Wr(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==J(e)?!1:t}function Ee(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),i=Ct(e);let s=ce(1);t&&(r?V(r)&&(s=Oe(r)):s=Oe(e));const c=Wr(i,n,r)?On(i):ce(0);let a=(o.left+c.x)/s.x,l=(o.top+c.y)/s.y,u=o.width/s.x,d=o.height/s.y;if(i){const p=J(i),f=r&&V(r)?J(r):r;let b=p,m=bt(b);for(;m&&r&&f!==b;){const x=Oe(m),y=m.getBoundingClientRect(),h=ne(m),v=y.left+(m.clientLeft+parseFloat(h.paddingLeft))*x.x,S=y.top+(m.clientTop+parseFloat(h.paddingTop))*x.y;a*=x.x,l*=x.y,u*=x.x,d*=x.y,a+=v,l+=S,b=J(m),m=bt(b)}}return Ye({width:u,height:d,x:a,y:l})}function it(e,t){const n=rt(e).scrollLeft;return t?t.left+n:Ee(le(e)).left+n}function In(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-it(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function Vr(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i=o==="fixed",s=le(r),c=t?tt(t.floating):!1;if(r===s||c&&i)return n;let a={scrollLeft:0,scrollTop:0},l=ce(1);const u=ce(0),d=K(r);if((d||!d&&!i)&&((xe(r)!=="body"||Le(s))&&(a=rt(r)),K(r))){const f=Ee(r);l=Oe(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}const p=s&&!d&&!i?In(s,a):ce(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-a.scrollLeft*l.x+u.x+p.x,y:n.y*l.y-a.scrollTop*l.y+u.y+p.y}}function jr(e){return Array.from(e.getClientRects())}function Hr(e){const t=le(e),n=rt(e),r=e.ownerDocument.body,o=G(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=G(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+it(e);const c=-n.scrollTop;return ne(r).direction==="rtl"&&(s+=G(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:c}}const Vt=25;function Kr(e,t){const n=J(e),r=le(e),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,c=0,a=0;if(o){i=o.width,s=o.height;const u=nt();(!u||u&&t==="fixed")&&(c=o.offsetLeft,a=o.offsetTop)}const l=it(r);if(l<=0){const u=r.ownerDocument,d=u.body,p=getComputedStyle(d),f=u.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,b=Math.abs(r.clientWidth-d.clientWidth-f);b<=Vt&&(i-=b)}else l<=Vt&&(i+=l);return{width:i,height:s,x:c,y:a}}const qr=new Set(["absolute","fixed"]);function Ur(e,t){const n=Ee(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=K(e)?Oe(e):ce(1),s=e.clientWidth*i.x,c=e.clientHeight*i.y,a=o*i.x,l=r*i.y;return{width:s,height:c,x:a,y:l}}function jt(e,t,n){let r;if(t==="viewport")r=Kr(e,n);else if(t==="document")r=Hr(le(e));else if(V(t))r=Ur(t,n);else{const o=On(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Ye(r)}function Pn(e,t){const n=me(e);return n===t||!V(n)||de(n)?!1:ne(n).position==="fixed"||Pn(n,t)}function Xr(e,t){const n=t.get(e);if(n)return n;let r=ye(e,[],!1).filter(c=>V(c)&&xe(c)!=="body"),o=null;const i=ne(e).position==="fixed";let s=i?me(e):e;for(;V(s)&&!de(s);){const c=ne(s),a=St(s);!a&&c.position==="fixed"&&(o=null),(i?!a&&!o:!a&&c.position==="static"&&!!o&&qr.has(o.position)||Le(s)&&!a&&Pn(e,s))?r=r.filter(u=>u!==s):o=c,s=me(s)}return t.set(e,r),r}function Yr(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const s=[...n==="clippingAncestors"?tt(t)?[]:Xr(t,this._c):[].concat(n),r],c=s[0],a=s.reduce((l,u)=>{const d=jt(t,u,o);return l.top=G(d.top,l.top),l.right=Pe(d.right,l.right),l.bottom=Pe(d.bottom,l.bottom),l.left=G(d.left,l.left),l},jt(t,c,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function zr(e){const{width:t,height:n}=An(e);return{width:t,height:n}}function Gr(e,t,n){const r=K(t),o=le(t),i=n==="fixed",s=Ee(e,!0,i,t);let c={scrollLeft:0,scrollTop:0};const a=ce(0);function l(){a.x=it(o)}if(r||!r&&!i)if((xe(t)!=="body"||Le(o))&&(c=rt(t)),r){const f=Ee(t,!0,i,t);a.x=f.x+t.clientLeft,a.y=f.y+t.clientTop}else o&&l();i&&!r&&o&&l();const u=o&&!r&&!i?In(o,c):ce(0),d=s.left+c.scrollLeft-a.x-u.x,p=s.top+c.scrollTop-a.y-u.y;return{x:d,y:p,width:s.width,height:s.height}}function dt(e){return ne(e).position==="static"}function Ht(e,t){if(!K(e)||ne(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return le(e)===n&&(n=n.ownerDocument.body),n}function kn(e,t){const n=J(e);if(tt(e))return n;if(!K(e)){let o=me(e);for(;o&&!de(o);){if(V(o)&&!dt(o))return o;o=me(o)}return n}let r=Ht(e,t);for(;r&&Wn(r)&&dt(r);)r=Ht(r,t);return r&&de(r)&&dt(r)&&!St(r)?n:r||qn(e)||n}const Zr=async function(e){const t=this.getOffsetParent||kn,n=this.getDimensions,r=await n(e.floating);return{reference:Gr(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Jr(e){return ne(e).direction==="rtl"}const Qr={convertOffsetParentRelativeRectToViewportRelativeRect:Vr,getDocumentElement:le,getClippingRect:Yr,getOffsetParent:kn,getElementRects:Zr,getClientRects:jr,getDimensions:zr,getScale:Oe,isElement:V,isRTL:Jr};function Mn(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function eo(e,t){let n=null,r;const o=le(e);function i(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function s(c,a){c===void 0&&(c=!1),a===void 0&&(a=1),i();const l=e.getBoundingClientRect(),{left:u,top:d,width:p,height:f}=l;if(c||t(),!p||!f)return;const b=Ve(d),m=Ve(o.clientWidth-(u+p)),x=Ve(o.clientHeight-(d+f)),y=Ve(u),v={rootMargin:-b+"px "+-m+"px "+-x+"px "+-y+"px",threshold:G(0,Pe(1,a))||1};let S=!0;function T(N){const I=N[0].intersectionRatio;if(I!==a){if(!S)return s();I?s(!1,I):r=setTimeout(()=>{s(!1,1e-7)},1e3)}I===1&&!Mn(l,e.getBoundingClientRect())&&s(),S=!1}try{n=new IntersectionObserver(T,{...v,root:o.ownerDocument})}catch{n=new IntersectionObserver(T,v)}n.observe(e)}return s(!0),i}function Bo(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:a=!1}=r,l=Ct(e),u=o||i?[...l?ye(l):[],...ye(t)]:[];u.forEach(y=>{o&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const d=l&&c?eo(l,n):null;let p=-1,f=null;s&&(f=new ResizeObserver(y=>{let[h]=y;h&&h.target===l&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var v;(v=f)==null||v.observe(t)})),n()}),l&&!a&&f.observe(l),f.observe(t));let b,m=a?Ee(e):null;a&&x();function x(){const y=Ee(e);m&&!Mn(m,y)&&n(),m=y,b=requestAnimationFrame(x)}return n(),()=>{var y;u.forEach(h=>{o&&h.removeEventListener("scroll",n),i&&h.removeEventListener("resize",n)}),d==null||d(),(y=f)==null||y.disconnect(),f=null,a&&cancelAnimationFrame(b)}}const to=Nr,no=Br,ro=Fr,oo=_r,io=(e,t,n)=>{const r=new Map,o={platform:Qr,...n},i={...o.platform,_c:r};return Mr(e,t,{...o,platform:i})};var so=typeof document<"u",co=function(){},qe=so?g.useLayoutEffect:co;function Je(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Je(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&e.$$typeof)&&!Je(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Fn(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Kt(e,t){const n=Fn(e);return Math.round(t*n)/n}function mt(e){const t=g.useRef(e);return qe(()=>{t.current=e}),t}function lo(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:c=!0,whileElementsMounted:a,open:l}=e,[u,d]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=g.useState(r);Je(p,r)||f(r);const[b,m]=g.useState(null),[x,y]=g.useState(null),h=g.useCallback(w=>{w!==N.current&&(N.current=w,m(w))},[]),v=g.useCallback(w=>{w!==I.current&&(I.current=w,y(w))},[]),S=i||b,T=s||x,N=g.useRef(null),I=g.useRef(null),B=g.useRef(u),q=a!=null,$=mt(a),_=mt(o),X=mt(l),j=g.useCallback(()=>{if(!N.current||!I.current)return;const w={placement:t,strategy:n,middleware:p};_.current&&(w.platform=_.current),io(N.current,I.current,w).then(O=>{const L={...O,isPositioned:X.current!==!1};R.current&&!Je(B.current,L)&&(B.current=L,an.flushSync(()=>{d(L)}))})},[p,t,n,_,X]);qe(()=>{l===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,d(w=>({...w,isPositioned:!1})))},[l]);const R=g.useRef(!1);qe(()=>(R.current=!0,()=>{R.current=!1}),[]),qe(()=>{if(S&&(N.current=S),T&&(I.current=T),S&&T){if($.current)return $.current(S,T,j);j()}},[S,T,j,$,q]);const E=g.useMemo(()=>({reference:N,floating:I,setReference:h,setFloating:v}),[h,v]),M=g.useMemo(()=>({reference:S,floating:T}),[S,T]),D=g.useMemo(()=>{const w={position:n,left:0,top:0};if(!M.floating)return w;const O=Kt(M.floating,u.x),L=Kt(M.floating,u.y);return c?{...w,transform:"translate("+O+"px, "+L+"px)",...Fn(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:L}},[n,c,M.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:j,refs:E,elements:M,floatingStyles:D}),[u,j,E,M,D])}const _o=(e,t)=>({...to(e),options:[e,t]}),$o=(e,t)=>({...no(e),options:[e,t]}),Wo=(e,t)=>({...ro(e),options:[e,t]}),Vo=(e,t)=>({...oo(e),options:[e,t]}),ao="data-floating-ui-focusable",qt="active",Ut="selected",uo={...ln};let Xt=!1,fo=0;const Yt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+fo++;function mo(){const[e,t]=g.useState(()=>Xt?Yt():void 0);return Z(()=>{e==null&&t(Yt())},[]),g.useEffect(()=>{Xt=!0},[]),e}const go=uo.useId,At=go||mo;function po(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const ho=g.createContext(null),bo=g.createContext(null),Dn=()=>{var e;return((e=g.useContext(ho))==null?void 0:e.id)||null},Ot=()=>g.useContext(bo);function De(e){return"data-floating-ui-"+e}function vo(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}let zt=0;function Te(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(zt);const i=()=>e==null?void 0:e.focus({preventScroll:n});o?i():zt=requestAnimationFrame(i)}function yo(e){return(e==null?void 0:e.ownerDocument)||document}const Ie={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function Gt(e){return e==="inert"?Ie.inert:e==="aria-hidden"?Ie["aria-hidden"]:Ie.none}let je=new WeakSet,He={},gt=0;const wo=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,Ln=e=>e&&(e.host||Ln(e.parentNode)),xo=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=Ln(n);return e.contains(r)?r:null}).filter(n=>n!=null);function Ro(e,t,n,r){const o="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,s=xo(t,e),c=new Set,a=new Set(s),l=[];He[o]||(He[o]=new WeakMap);const u=He[o];s.forEach(d),p(t),c.clear();function d(f){!f||c.has(f)||(c.add(f),f.parentNode&&d(f.parentNode))}function p(f){!f||a.has(f)||[].forEach.call(f.children,b=>{if(xe(b)!=="script")if(c.has(b))p(b);else{const m=i?b.getAttribute(i):null,x=m!==null&&m!=="false",y=Gt(i),h=(y.get(b)||0)+1,v=(u.get(b)||0)+1;y.set(b,h),u.set(b,v),l.push(b),h===1&&x&&je.add(b),v===1&&b.setAttribute(o,""),!x&&i&&b.setAttribute(i,i==="inert"?"":"true")}})}return gt++,()=>{l.forEach(f=>{const b=Gt(i),x=(b.get(f)||0)-1,y=(u.get(f)||0)-1;b.set(f,x),u.set(f,y),x||(!je.has(f)&&i&&f.removeAttribute(i),je.delete(f)),y||f.removeAttribute(o)}),gt--,gt||(Ie.inert=new WeakMap,Ie["aria-hidden"]=new WeakMap,Ie.none=new WeakMap,je=new WeakSet,He={})}}function Zt(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=yo(e[0]).body;return Ro(e.concat(Array.from(r.querySelectorAll('[aria-live],[role="status"],output'))),r,t,n)}const st={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Qe=g.forwardRef(function(t,n){const[r,o]=g.useState();Z(()=>{yr()&&o("button")},[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[De("focus-guard")]:"",style:st};return te.jsx("span",{...t,...i})}),Nn=g.createContext(null),Jt=De("portal");function Eo(e){e===void 0&&(e={});const{id:t,root:n}=e,r=At(),o=Bn(),[i,s]=g.useState(null),c=g.useRef(null);return Z(()=>()=>{i==null||i.remove(),queueMicrotask(()=>{c.current=null})},[i]),Z(()=>{if(!r||c.current)return;const a=t?document.getElementById(t):null;if(!a)return;const l=document.createElement("div");l.id=r,l.setAttribute(Jt,""),a.appendChild(l),c.current=l,s(l)},[t,r]),Z(()=>{if(n===null||!r||c.current)return;let a=n||(o==null?void 0:o.portalNode);a&&!Et(a)&&(a=a.current),a=a||document.body;let l=null;t&&(l=document.createElement("div"),l.id=t,a.appendChild(l));const u=document.createElement("div");u.id=r,u.setAttribute(Jt,""),a=l||a,a.appendChild(u),c.current=u,s(u)},[t,n,r,o]),i}function jo(e){const{children:t,id:n,root:r,preserveTabOrder:o=!0}=e,i=Eo({id:n,root:r}),[s,c]=g.useState(null),a=g.useRef(null),l=g.useRef(null),u=g.useRef(null),d=g.useRef(null),p=s==null?void 0:s.modal,f=s==null?void 0:s.open,b=!!s&&!s.modal&&s.open&&o&&!!(r||i);return g.useEffect(()=>{if(!i||!o||p)return;function m(x){i&&Me(x)&&(x.type==="focusin"?$t:kr)(i)}return i.addEventListener("focusin",m,!0),i.addEventListener("focusout",m,!0),()=>{i.removeEventListener("focusin",m,!0),i.removeEventListener("focusout",m,!0)}},[i,o,p]),g.useEffect(()=>{i&&(f||$t(i))},[f,i]),te.jsxs(Nn.Provider,{value:g.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:a,afterOutsideRef:l,beforeInsideRef:u,afterInsideRef:d,portalNode:i,setFocusManagerState:c}),[o,i]),children:[b&&i&&te.jsx(Qe,{"data-type":"outside",ref:a,onFocus:m=>{if(Me(m,i)){var x;(x=u.current)==null||x.focus()}else{const y=s?s.domReference:null,h=Cn(y);h==null||h.focus()}}}),b&&i&&te.jsx("span",{"aria-owns":i.id,style:st}),i&&an.createPortal(t,i),b&&i&&te.jsx(Qe,{"data-type":"outside",ref:l,onFocus:m=>{if(Me(m,i)){var x;(x=d.current)==null||x.focus()}else{const y=s?s.domReference:null,h=Tn(y);h==null||h.focus(),s!=null&&s.closeOnFocusOut&&(s==null||s.onOpenChange(!1,m.nativeEvent,"focus-out"))}}})]})}const Bn=()=>g.useContext(Nn);function Qt(e){return g.useMemo(()=>t=>{e.forEach(n=>{n&&(n.current=t)})},e)}const So=20;let ve=[];function It(){ve=ve.filter(e=>e.isConnected)}function To(e){It(),e&&xe(e)!=="body"&&(ve.push(e),ve.length>So&&(ve=ve.slice(-20)))}function en(){return It(),ve[ve.length-1]}function Co(e){const t=_e();return wn(e,t)?e:ot(e,t)[0]||e}function tn(e,t){var n;if(!t.current.includes("floating")&&!((n=e.getAttribute("role"))!=null&&n.includes("dialog")))return;const r=_e(),i=vr(e,r).filter(c=>{const a=c.getAttribute("data-tabindex")||"";return wn(c,r)||c.hasAttribute("data-tabindex")&&!a.startsWith("-")}),s=e.getAttribute("tabindex");t.current.includes("floating")||i.length===0?s!=="0"&&e.setAttribute("tabindex","0"):(s!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const Ao=g.forwardRef(function(t,n){return te.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:st})});function Ho(e){const{context:t,children:n,disabled:r=!1,order:o=["content"],guards:i=!0,initialFocus:s=0,returnFocus:c=!0,restoreFocus:a=!1,modal:l=!0,visuallyHiddenDismiss:u=!1,closeOnFocusOut:d=!0,outsideElementsInert:p=!1,getInsideElements:f=()=>[]}=e,{open:b,onOpenChange:m,events:x,dataRef:y,elements:{domReference:h,floating:v}}=t,S=se(()=>{var C;return(C=y.current.floatingContext)==null?void 0:C.nodeId}),T=se(f),N=typeof s=="number"&&s<0,I=Nt(h)&&N,B=wo(),q=B?i:!0,$=!q||B&&p,_=ft(o),X=ft(s),j=ft(c),R=Ot(),E=Bn(),M=g.useRef(null),D=g.useRef(null),w=g.useRef(!1),O=g.useRef(!1),L=g.useRef(-1),re=g.useRef(-1),Se=E!=null,P=Rt(v),ie=se(function(C){return C===void 0&&(C=P),C?ot(C,_e()):[]}),H=se(C=>{const k=ie(C);return _.current.map(A=>h&&A==="reference"?h:P&&A==="floating"?P:k).filter(Boolean).flat()});g.useEffect(()=>{if(r||!l)return;function C(A){if(A.key==="Tab"){z(P,Ce(oe(P)))&&ie().length===0&&!I&&ut(A);const W=H(),U=be(A);_.current[0]==="reference"&&U===h&&(ut(A),A.shiftKey?Te(W[W.length-1]):Te(W[1])),_.current[1]==="floating"&&U===P&&A.shiftKey&&(ut(A),Te(W[0]))}}const k=oe(P);return k.addEventListener("keydown",C),()=>{k.removeEventListener("keydown",C)}},[r,h,P,l,_,I,ie,H]),g.useEffect(()=>{if(r||!v)return;function C(k){const A=be(k),U=ie().indexOf(A);U!==-1&&(L.current=U)}return v.addEventListener("focusin",C),()=>{v.removeEventListener("focusin",C)}},[r,v,ie]),g.useEffect(()=>{if(r||!d)return;function C(){O.current=!0,setTimeout(()=>{O.current=!1})}function k(U){const F=U.relatedTarget,ae=U.currentTarget,ee=be(U);queueMicrotask(()=>{const Y=S(),Re=!(z(h,F)||z(v,F)||z(F,v)||z(E==null?void 0:E.portalNode,F)||F!=null&&F.hasAttribute(De("focus-guard"))||R&&(Ae(R.nodesRef.current,Y).find(pe=>{var ue,he;return z((ue=pe.context)==null?void 0:ue.elements.floating,F)||z((he=pe.context)==null?void 0:he.elements.domReference,F)})||Bt(R.nodesRef.current,Y).find(pe=>{var ue,he,Pt;return[(ue=pe.context)==null?void 0:ue.elements.floating,Rt((he=pe.context)==null?void 0:he.elements.floating)].includes(F)||((Pt=pe.context)==null?void 0:Pt.elements.domReference)===F})));if(ae===h&&P&&tn(P,_),a&&ae!==h&&!(ee!=null&&ee.isConnected)&&Ce(oe(P))===oe(P).body){K(P)&&P.focus();const pe=L.current,ue=ie(),he=ue[pe]||ue[ue.length-1]||P;K(he)&&he.focus()}if(y.current.insideReactTree){y.current.insideReactTree=!1;return}(I||!l)&&F&&Re&&!O.current&&F!==en()&&(w.current=!0,m(!1,U,"focus-out"))})}const A=!!(!R&&E);function W(){vo(re),y.current.insideReactTree=!0,re.current=window.setTimeout(()=>{y.current.insideReactTree=!1})}if(v&&K(h))return h.addEventListener("focusout",k),h.addEventListener("pointerdown",C),v.addEventListener("focusout",k),A&&v.addEventListener("focusout",W,!0),()=>{h.removeEventListener("focusout",k),h.removeEventListener("pointerdown",C),v.removeEventListener("focusout",k),A&&v.removeEventListener("focusout",W,!0)}},[r,h,v,P,l,R,E,m,d,a,ie,I,S,_,y]);const Q=g.useRef(null),ge=g.useRef(null),ct=Qt([Q,E==null?void 0:E.beforeInsideRef]),lt=Qt([ge,E==null?void 0:E.afterInsideRef]);g.useEffect(()=>{var C,k;if(r||!v)return;const A=Array.from((E==null||(C=E.portalNode)==null?void 0:C.querySelectorAll("["+De("portal")+"]"))||[]),U=(k=(R?Bt(R.nodesRef.current,S()):[]).find(ee=>{var Y;return Nt(((Y=ee.context)==null?void 0:Y.elements.domReference)||null)}))==null||(k=k.context)==null?void 0:k.elements.domReference,F=[v,U,...A,...T(),M.current,D.current,Q.current,ge.current,E==null?void 0:E.beforeOutsideRef.current,E==null?void 0:E.afterOutsideRef.current,_.current.includes("reference")||I?h:null].filter(ee=>ee!=null),ae=l||I?Zt(F,!$,$):Zt(F);return()=>{ae()}},[r,h,v,l,_,E,I,q,$,R,S,T]),Z(()=>{if(r||!K(P))return;const C=oe(P),k=Ce(C);queueMicrotask(()=>{const A=H(P),W=X.current,U=(typeof W=="number"?A[W]:W.current)||P,F=z(P,k);!N&&!F&&b&&Te(U,{preventScroll:U===P})})},[r,b,P,N,H,X]),Z(()=>{if(r||!P)return;const C=oe(P),k=Ce(C);To(k);function A(F){let{reason:ae,event:ee,nested:Y}=F;if(["hover","safe-polygon"].includes(ae)&&ee.type==="mouseleave"&&(w.current=!0),ae==="outside-press")if(Y)w.current=!1;else if(Sr(ee)||Tr(ee))w.current=!1;else{let Re=!1;document.createElement("div").focus({get preventScroll(){return Re=!0,!1}}),Re?w.current=!1:w.current=!0}}x.on("openchange",A);const W=C.createElement("span");W.setAttribute("tabindex","-1"),W.setAttribute("aria-hidden","true"),Object.assign(W.style,st),Se&&h&&h.insertAdjacentElement("afterend",W);function U(){if(typeof j.current=="boolean"){const F=h||en();return F&&F.isConnected?F:W}return j.current.current||W}return()=>{x.off("openchange",A);const F=Ce(C),ae=z(v,F)||R&&Ae(R.nodesRef.current,S(),!1).some(Y=>{var Re;return z((Re=Y.context)==null?void 0:Re.elements.floating,F)}),ee=U();queueMicrotask(()=>{const Y=Co(ee);j.current&&!w.current&&K(Y)&&(!(Y!==F&&F!==C.body)||ae)&&Y.focus({preventScroll:!0}),W.remove()})}},[r,v,P,j,y,x,R,Se,h,S]),g.useEffect(()=>(queueMicrotask(()=>{w.current=!1}),()=>{queueMicrotask(It)}),[r]),Z(()=>{if(!r&&E)return E.setFocusManagerState({modal:l,closeOnFocusOut:d,open:b,onOpenChange:m,domReference:h}),()=>{E.setFocusManagerState(null)}},[r,E,l,b,m,d,h]),Z(()=>{r||P&&tn(P,_)},[r,P,_]);function $e(C){return r||!u||!l?null:te.jsx(Ao,{ref:C==="start"?M:D,onClick:k=>m(!1,k.nativeEvent),children:typeof u=="string"?u:"Dismiss"})}const We=!r&&q&&(l?!I:!0)&&(Se||l);return te.jsxs(te.Fragment,{children:[We&&te.jsx(Qe,{"data-type":"inside",ref:ct,onFocus:C=>{if(l){const A=H();Te(o[0]==="reference"?A[0]:A[A.length-1])}else if(E!=null&&E.preserveTabOrder&&E.portalNode)if(w.current=!1,Me(C,E.portalNode)){const A=Tn(h);A==null||A.focus()}else{var k;(k=E.beforeOutsideRef.current)==null||k.focus()}}}),!I&&$e("start"),n,$e("end"),We&&te.jsx(Qe,{"data-type":"inside",ref:lt,onFocus:C=>{if(l)Te(H()[0]);else if(E!=null&&E.preserveTabOrder&&E.portalNode)if(d&&(w.current=!0),Me(C,E.portalNode)){const A=Cn(h);A==null||A.focus()}else{var k;(k=E.afterOutsideRef.current)==null||k.focus()}}})]})}let Ke=0;const nn="--floating-ui-scrollbar-width";function Oo(){const e=xn(),t=/iP(hone|ad|od)|iOS/.test(e)||e==="MacIntel"&&navigator.maxTouchPoints>1,n=document.body.style,o=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=n.left?parseFloat(n.left):window.scrollX,c=n.top?parseFloat(n.top):window.scrollY;if(n.overflow="hidden",n.setProperty(nn,i+"px"),i&&(n[o]=i+"px"),t){var a,l;const u=((a=window.visualViewport)==null?void 0:a.offsetLeft)||0,d=((l=window.visualViewport)==null?void 0:l.offsetTop)||0;Object.assign(n,{position:"fixed",top:-(c-Math.floor(d))+"px",left:-(s-Math.floor(u))+"px",right:"0"})}return()=>{Object.assign(n,{overflow:"",[o]:""}),n.removeProperty(nn),t&&(Object.assign(n,{position:"",top:"",left:"",right:""}),window.scrollTo(s,c))}}let rn=()=>{};const Ko=g.forwardRef(function(t,n){const{lockScroll:r=!1,...o}=t;return Z(()=>{if(r)return Ke++,Ke===1&&(rn=Oo()),()=>{Ke--,Ke===0&&rn()}},[r]),te.jsx("div",{ref:n,...o,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...o.style}})});function on(e){return K(e.target)&&e.target.tagName==="BUTTON"}function Io(e){return K(e.target)&&e.target.tagName==="A"}function sn(e){return En(e)}function qo(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:i}}=e,{enabled:s=!0,event:c="click",toggle:a=!0,ignoreMouse:l=!1,keyboardHandlers:u=!0,stickIfOpen:d=!0}=t,p=g.useRef(),f=g.useRef(!1),b=g.useMemo(()=>({onPointerDown(m){p.current=m.pointerType},onMouseDown(m){const x=p.current;m.button===0&&c!=="click"&&(_t(x)&&l||(n&&a&&(!(o.current.openEvent&&d)||o.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent,"click"):(m.preventDefault(),r(!0,m.nativeEvent,"click"))))},onClick(m){const x=p.current;if(c==="mousedown"&&p.current){p.current=void 0;return}_t(x)&&l||(n&&a&&(!(o.current.openEvent&&d)||o.current.openEvent.type==="click")?r(!1,m.nativeEvent,"click"):r(!0,m.nativeEvent,"click"))},onKeyDown(m){p.current=void 0,!(m.defaultPrevented||!u||on(m))&&(m.key===" "&&!sn(i)&&(m.preventDefault(),f.current=!0),!Io(m)&&m.key==="Enter"&&r(!(n&&a),m.nativeEvent,"click"))},onKeyUp(m){m.defaultPrevented||!u||on(m)||sn(i)||m.key===" "&&f.current&&(f.current=!1,r(!(n&&a),m.nativeEvent,"click"))}}),[o,i,c,l,u,r,n,d,a]);return g.useMemo(()=>s?{reference:b}:{},[s,b])}const Po={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},ko={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},cn=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Uo(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=e,{enabled:s=!0,escapeKey:c=!0,outsidePress:a=!0,outsidePressEvent:l="pointerdown",referencePress:u=!1,referencePressEvent:d="pointerdown",ancestorScroll:p=!1,bubbles:f,capture:b}=t,m=Ot(),x=se(typeof a=="function"?a:()=>!1),y=typeof a=="function"?x:a,h=g.useRef(!1),{escapeKey:v,outsidePress:S}=cn(f),{escapeKey:T,outsidePress:N}=cn(b),I=g.useRef(!1),B=se(R=>{var E;if(!n||!s||!c||R.key!=="Escape"||I.current)return;const M=(E=i.current.floatingContext)==null?void 0:E.nodeId,D=m?Ae(m.nodesRef.current,M):[];if(!v&&(R.stopPropagation(),D.length>0)){let w=!0;if(D.forEach(O=>{var L;if((L=O.context)!=null&&L.open&&!O.context.dataRef.current.__escapeKeyBubbles){w=!1;return}}),!w)return}r(!1,Er(R)?R.nativeEvent:R,"escape-key")}),q=se(R=>{var E;const M=()=>{var D;B(R),(D=be(R))==null||D.removeEventListener("keydown",M)};(E=be(R))==null||E.addEventListener("keydown",M)}),$=se(R=>{var E;const M=i.current.insideReactTree;i.current.insideReactTree=!1;const D=h.current;if(h.current=!1,l==="click"&&D||M||typeof y=="function"&&!y(R))return;const w=be(R),O="["+De("inert")+"]",L=oe(o.floating).querySelectorAll(O);let re=V(w)?w:null;for(;re&&!de(re);){const H=me(re);if(de(H)||!V(H))break;re=H}if(L.length&&V(w)&&!Rr(w)&&!z(w,o.floating)&&Array.from(L).every(H=>!z(re,H)))return;if(K(w)&&j){const H=de(w),Q=ne(w),ge=/auto|scroll/,ct=H||ge.test(Q.overflowX),lt=H||ge.test(Q.overflowY),$e=ct&&w.clientWidth>0&&w.scrollWidth>w.clientWidth,We=lt&&w.clientHeight>0&&w.scrollHeight>w.clientHeight,C=Q.direction==="rtl",k=We&&(C?R.offsetX<=w.offsetWidth-w.clientWidth:R.offsetX>w.clientWidth),A=$e&&R.offsetY>w.clientHeight;if(k||A)return}const Se=(E=i.current.floatingContext)==null?void 0:E.nodeId,P=m&&Ae(m.nodesRef.current,Se).some(H=>{var Q;return at(R,(Q=H.context)==null?void 0:Q.elements.floating)});if(at(R,o.floating)||at(R,o.domReference)||P)return;const ie=m?Ae(m.nodesRef.current,Se):[];if(ie.length>0){let H=!0;if(ie.forEach(Q=>{var ge;if((ge=Q.context)!=null&&ge.open&&!Q.context.dataRef.current.__outsidePressBubbles){H=!1;return}}),!H)return}r(!1,R,"outside-press")}),_=se(R=>{var E;const M=()=>{var D;$(R),(D=be(R))==null||D.removeEventListener(l,M)};(E=be(R))==null||E.addEventListener(l,M)});g.useEffect(()=>{if(!n||!s)return;i.current.__escapeKeyBubbles=v,i.current.__outsidePressBubbles=S;let R=-1;function E(L){r(!1,L,"ancestor-scroll")}function M(){window.clearTimeout(R),I.current=!0}function D(){R=window.setTimeout(()=>{I.current=!1},nt()?5:0)}const w=oe(o.floating);c&&(w.addEventListener("keydown",T?q:B,T),w.addEventListener("compositionstart",M),w.addEventListener("compositionend",D)),y&&w.addEventListener(l,N?_:$,N);let O=[];return p&&(V(o.domReference)&&(O=ye(o.domReference)),V(o.floating)&&(O=O.concat(ye(o.floating))),!V(o.reference)&&o.reference&&o.reference.contextElement&&(O=O.concat(ye(o.reference.contextElement)))),O=O.filter(L=>{var re;return L!==((re=w.defaultView)==null?void 0:re.visualViewport)}),O.forEach(L=>{L.addEventListener("scroll",E,{passive:!0})}),()=>{c&&(w.removeEventListener("keydown",T?q:B,T),w.removeEventListener("compositionstart",M),w.removeEventListener("compositionend",D)),y&&w.removeEventListener(l,N?_:$,N),O.forEach(L=>{L.removeEventListener("scroll",E)}),window.clearTimeout(R)}},[i,o,c,y,l,n,r,p,s,v,S,B,T,q,$,N,_]),g.useEffect(()=>{i.current.insideReactTree=!1},[i,y,l]);const X=g.useMemo(()=>({onKeyDown:B,...u&&{[Po[d]]:R=>{r(!1,R.nativeEvent,"reference-press")},...d!=="click"&&{onClick(R){r(!1,R.nativeEvent,"reference-press")}}}}),[B,r,u,d]),j=g.useMemo(()=>({onKeyDown:B,onMouseDown(){h.current=!0},onMouseUp(){h.current=!0},[ko[l]]:()=>{i.current.insideReactTree=!0}}),[B,l,i]);return g.useMemo(()=>s?{reference:X,floating:j}:{},[s,X,j])}function Mo(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=At(),i=g.useRef({}),[s]=g.useState(()=>po()),c=Dn()!=null,[a,l]=g.useState(r.reference),u=se((f,b,m)=>{i.current.openEvent=f?b:void 0,s.emit("openchange",{open:f,event:b,reason:m,nested:c}),n==null||n(f,b,m)}),d=g.useMemo(()=>({setPositionReference:l}),[]),p=g.useMemo(()=>({reference:a||r.reference||null,floating:r.floating||null,domReference:r.reference}),[a,r.reference,r.floating]);return g.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:p,events:s,floatingId:o,refs:d}),[t,u,p,s,o,d])}function Xo(e){e===void 0&&(e={});const{nodeId:t}=e,n=Mo({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[i,s]=g.useState(null),[c,a]=g.useState(null),u=(o==null?void 0:o.domReference)||i,d=g.useRef(null),p=Ot();Z(()=>{u&&(d.current=u)},[u]);const f=lo({...e,elements:{...o,...c&&{reference:c}}}),b=g.useCallback(v=>{const S=V(v)?{getBoundingClientRect:()=>v.getBoundingClientRect(),getClientRects:()=>v.getClientRects(),contextElement:v}:v;a(S),f.refs.setReference(S)},[f.refs]),m=g.useCallback(v=>{(V(v)||v===null)&&(d.current=v,s(v)),(V(f.refs.reference.current)||f.refs.reference.current===null||v!==null&&!V(v))&&f.refs.setReference(v)},[f.refs]),x=g.useMemo(()=>({...f.refs,setReference:m,setPositionReference:b,domReference:d}),[f.refs,m,b]),y=g.useMemo(()=>({...f.elements,domReference:u}),[f.elements,u]),h=g.useMemo(()=>({...f,...r,refs:x,elements:y,nodeId:t}),[f,x,y,t,r]);return Z(()=>{r.dataRef.current.floatingContext=h;const v=p==null?void 0:p.nodesRef.current.find(S=>S.id===t);v&&(v.context=h)}),g.useMemo(()=>({...f,context:h,refs:x,elements:y}),[f,x,y,h])}function pt(e,t,n){const r=new Map,o=n==="item";let i=e;if(o&&e){const{[qt]:s,[Ut]:c,...a}=e;i=a}return{...n==="floating"&&{tabIndex:-1,[ao]:""},...i,...t.map(s=>{const c=s?s[n]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((s,c)=>(c&&Object.entries(c).forEach(a=>{let[l,u]=a;if(!(o&&[qt,Ut].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof u=="function"){var d;(d=r.get(l))==null||d.push(u),s[l]=function(){for(var p,f=arguments.length,b=new Array(f),m=0;m<f;m++)b[m]=arguments[m];return(p=r.get(l))==null?void 0:p.map(x=>x(...b)).find(x=>x!==void 0)}}}else s[l]=u}),s),{})}}function Yo(e){e===void 0&&(e=[]);const t=e.map(c=>c==null?void 0:c.reference),n=e.map(c=>c==null?void 0:c.floating),r=e.map(c=>c==null?void 0:c.item),o=g.useCallback(c=>pt(c,e,"reference"),t),i=g.useCallback(c=>pt(c,e,"floating"),n),s=g.useCallback(c=>pt(c,e,"item"),r);return g.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:s}),[o,i,s])}const Fo=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function zo(e,t){var n,r;t===void 0&&(t={});const{open:o,elements:i,floatingId:s}=e,{enabled:c=!0,role:a="dialog"}=t,l=At(),u=((n=i.domReference)==null?void 0:n.id)||l,d=g.useMemo(()=>{var h;return((h=Rt(i.floating))==null?void 0:h.id)||s},[i.floating,s]),p=(r=Fo.get(a))!=null?r:a,b=Dn()!=null,m=g.useMemo(()=>p==="tooltip"||a==="label"?{["aria-"+(a==="label"?"labelledby":"describedby")]:o?d:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":p==="alertdialog"?"dialog":p,"aria-controls":o?d:void 0,...p==="listbox"&&{role:"combobox"},...p==="menu"&&{id:u},...p==="menu"&&b&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},[p,d,b,o,u,a]),x=g.useMemo(()=>{const h={id:d,...p&&{role:p}};return p==="tooltip"||a==="label"?h:{...h,...p==="menu"&&{"aria-labelledby":u}}},[p,d,u,a]),y=g.useCallback(h=>{let{active:v,selected:S}=h;const T={role:"option",...v&&{id:d+"-fui-option"}};switch(a){case"select":case"combobox":return{...T,"aria-selected":S}}return{}},[d,a]);return g.useMemo(()=>c?{reference:m,floating:x,item:y}:{},[c,m,x,y])}export{jo as F,qo as a,Uo as b,zo as c,Yo as d,At as e,Ko as f,Ho as g,Wo as h,Vo as i,Bo as j,_o as o,$o as s,Xo as u};
